<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Question page</title>
    <link rel="stylesheet" type="text/css" href={{ url_for('static', filename='style/question_display.css')}}>

</head>
<body>
    <h1>Question</h1><br>
    <table cellpadding="5">
        <tr align="center">
            <th> Question  </th>
            <th> Question message  </th>
            <th> Vote number </th>
        </tr>
        <tr align="center">
            <td>{{ question_data.title }}</td>
            <td>{{ question_data.message }}</td>
            <td>{{ question_data.vote_number }}</td>
            <td><img alt="" width='100' src="{{ url_for('static', filename=question_data.submission_time|string + '.jpg') }}"></td>
            <form action="/question/{{question_data.id}}/vote_up">
                <td><input type="submit" value="vote up"/></td>
            </form>
            <form action="/question/{{question_data.id}}/vote_down">
                <td><input type="submit" value="vote down"/></td>
            </form>
            <form action="/question/{{question_id}}/edit">
                <td><input type="submit" value="Edit"/></td>
            </form>
        </tr>
    </table>
    <br>
    <table cellpadding="5">
        <tr><td></td><td><b>Comments</b></td><td></td></tr>
        {% for comment in comments %}
            {% if question_id|int == comment.question_id %}
                <tr>
                    <td>{{ comment.message }}</td>
                    <td>{{ comment.submission_time }}</td>
                    <td>
                        <form action="">
                            <button type="submit" formaction="/comments/{{comment.id}}/delete">Delete</button>
                            <button type="submit" formaction="/comment/{{comment.id}}/edit">Edit</button>
                        </form>
                    </td>
                </tr>
            {% endif %}
        {% endfor %}
    </table>
    <br>
    <div>Tags:&emsp;{% for tag in question_tags %}
        <button>{{ tag.name }}</button>
        <a href="{{ url_for('delete_tag', question_id=question_id, tag_id=tag.id) }}">x</a>&emsp;
    {% endfor %}
    <button><a href="{{ url_for('tag_question', question_id=question_id) }}">Add a new tag</a></button>
{#    <form action="{{ url_for('tag_question', question_id=question_id) }}">#}
{#        <input type="submit" value="Add a new tag"/>#}
{#    </form>#}
    <form id="comment" action="/question/{{ question_id }}/new-comment">
        <button type="submit">Add comment</button>
    </form><br>
    </div><br>
    <table cellpadding="5">
        {% if answer_data==[] %}
            <tr>
           <th> Answer: </th>
                <td>No answer yet</td>
            </tr>
        {% endif %}
        <h2> Answers: </h2>
        {% for answer in answer_data %}
            <tr class="answer_row">
                <td><b>{{ answer.message }}</b></td>
                <td><img alt="" width='150' src="{{ url_for('static', filename=answer.submission_time|string + '.jpg') }}"></td>

                <td>Vote number: {{ answer.vote_number }}</td>

                <form action="/answer/{{answer.id}}/vote_up">
                    <td><input type="submit" value="vote up"/></td>
                </form>

                <form action="/answer/{{answer.id}}/vote_down">
                    <td><input type="submit" value="vote down"/></td>
                </form>

                <form action="/answer/{{answer.id}}/edit">
                    <td><input type="submit" value="edit"/></td>
                </form>

                <form action="/question/{{answer.id}}&{{ false }}/delete">
                    <td><input type="submit" value="Delete"/></td>
                </form>

                <form action="/answer/{{answer.id}}/new-comment">
                    <td><input type="submit" value="Add comment"/></td>
                </form>
            </tr>
            {% for comment in comments %}
                {% if answer.id == comment.answer_id %}
                    <tr>
                        <td>{{ comment.message }}</td>
                        <td>{{ comment.submission_time }}</td>
                        <td>
                            <form action="">
                                <button type="submit" formaction="/comments/{{comment.id}}/delete">Delete</button>
                                <button type="submit" formaction="/comment/{{comment.id}}/edit">Edit</button>
                            </form>
                        </td>
                    </tr>
                {% endif %}
            {% endfor %}
        {% endfor %}
    </table><br>
    <div>
        <form>
            <button type="submit" formaction="/question/{{question_id}}/new-answer">Add an answer</button>
            <button id="comment" type="submit" formaction="/question/{{question_id}}&{{ true }}/delete">Delete question</button>
        </form>
    </div><br>
    <button><a href="/list"> Return to questions</a></button>
</body>
</html>